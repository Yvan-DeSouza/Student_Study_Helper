{% extends "base.html" %}
{% block title %}Assignments | StudyMate{% endblock %}

{% block extra_css %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/assignments.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/form.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/selector.css') }}">
{% endblock %}

{% block navbar %}

<nav class="navbar card">
    <div class="nav-left">
        <img src="{{ url_for('static', filename='images/study_logo.png') }}" class="nav-logo" alt="StudyMate logo">
        <span class="brand-name">StudyMate</span>
    </div>


<div class="nav-center">
    <a href="{{ url_for('main.home') }}" class="nav-link">Home</a>
    <a href="{{ url_for('classes.list_classes') }}" class="nav-link">Classes</a>
    <a href="{{ url_for('assignment.list_assignments') }}" class="nav-link active">Assignments</a>
    <a href="{{ url_for('study.study_sessions') }}" class="nav-link">Study Sessions</a>
    <a href="{{ url_for('dashboard.graphs') }}" class="nav-link">Dashboard</a>
    <a href="{{ url_for('calendar.home') }}" class="nav-link">Calendar</a>
</div>

<div class="nav-right">
    <a href="{{ url_for('auth.logout') }}" class="logout-link">Logout</a>
    <div class="user-avatar">
        <img src="{{ url_for('static', filename='images/user_avatar.png') }}" alt="User avatar">
    </div>
    <button class="theme-toggle" aria-label="Toggle theme">
        <span class="toggle-icon">‚òÄÔ∏è</span>
    </button>
</div>

</nav>
{% endblock %}

{% block content %}

<div class="assignments-container">


<!-- ================= TOP ACTIONS ================= -->
<section class="assignments-top card">
    <div class="top-left">
        <h1>Your Assignments</h1>
        <p class="muted">Track deadlines, grades, and completion</p>
    </div>
    <div class="top-right">
        <button class="btn-tiny" data-open-modal="addAssignmentModal">+ Add Assignment</button>
    </div>
</section>

<!-- ================= REMINDERS ================= -->
<section class="assignments-reminders">
    <div class="card upcoming-deadlines">
        <h3>Upcoming Deadlines</h3>
        <ul class="deadline-list">
            <!-- JS inject upcoming assignments -->
            <li class="placeholder">No upcoming deadlines</li>
        </ul>
    </div>

    <div class="card calendar-preview">
        <h3>This Month</h3>
        <div class="calendar-grid">
            <!-- Calendar scaffold only -->
        </div>
    </div>
</section>

        <!-- ================= CLASS FILTERS ================= -->
    <section class="selector-bar">

        <!-- Sort (only relevant if per_class, but always visible) -->
        <div class="selector-group">
            <label class="selector-label">Class sort</label>
            <select class="selector-select" id="classSortBy">
                <option value="name_asc">Name (A ‚Üí Z)</option>
                <option value="name_desc">Name (Z ‚Üí A)</option>
                <option value="importance_high_low">Importance (High ‚Üí Low)</option>
                <option value="importance_low_high">Importance (Low ‚Üí High)</option>
                <option value="difficulty_high_low">Difficulty (High ‚Üí Low)</option>
                <option value="difficulty_low_high">Difficulty (Low ‚Üí High)</option>
                <option value="grade_high_low">Grade (High ‚Üí Low)</option>
                <option value="grade_low_high">Grade (Low ‚Üí High)</option>
                <option value="created_newest">Newest</option>
                <option value="created_oldest">Oldest</option>
            </select>
        </div>

        <!-- Status -->
        <div class="selector-group">
            <label class="selector-label">Class status</label>
            <select class="selector-select" id="classStatusFilter">
                <option value="all">All</option>
                <option value="in_progress">In progress</option>
                <option value="finished">Finished</option>
            </select>
        </div>

        <!-- Importance -->
        <div class="selector-group wide">
            <span class="selector-label">Importance</span>
            <div class="selector-checks">
                <label class="selector-check"><input type="checkbox" value="high" checked> High</label>
                <label class="selector-check"><input type="checkbox" value="medium" checked> Medium</label>
                <label class="selector-check"><input type="checkbox" value="low" checked> Low</label>
            </div>
        </div>

        <!-- Class Types (JS can inject actual user types later) -->
        <div class="selector-group wide">
            <span class="selector-label">Class type</span>
            <div class="selector-checks grid">
                <label class="selector-check" for="class_type_selector_math"><input type="checkbox" name="class_type_selector" id="class_type_selector_math" checked> Math</label>
                <label class="selector-check" for="class_type_selector_science"><input type="checkbox" name="class_type_selector" id="class_type_selector_science" checked> Science</label>
                <label class="selector-check" for="class_type_selector_language"><input type="checkbox" name="class_type_selector" id="class_type_selector_language" checked> Language</label>
                <label class="selector-check" for="class_type_selector_social_science"><input type="checkbox" name="class_type_selector" id="class_type_selector_social_science" checked> Social Science</label>
                <label class="selector-check" for="class_type_selector_art"><input type="checkbox" name="class_type_selector" id="class_type_selector_art" checked> Art</label>
                <label class="selector-check" for="class_type_selector_engineering"><input type="checkbox" name="class_type_selector" id="class_type_selector_engineering" checked> Engineering</label>
                <label class="selector-check" for="class_type_selector_technology"><input type="checkbox" name="class_type_selector" id="class_type_selector_technology" checked> Tech</label>
                <label class="selector-check" for="class_type_selector_finance"><input type="checkbox" name="class_type_selector" id="class_type_selector_finance" checked> Finance</label>
                <label class="selector-check" for="class_type_selector_other"><input type="checkbox" name="class_type_selector" id="class_type_selector_other"checked> Other</label>
            </div>
        </div>

        <!-- Actions (STACKED) -->
        <div class="selector-actions stacked">
            <button class="btn-tiny primary" id="applyClassFilters">
                Apply filters
            </button>
        </div>

    </section>



    <!-- ================= ASSIGNMENT FILTERS ================= -->
    <section class="selector-bar">

        <!-- Table layout -->
        <div class="selector-group">
            <label class="selector-label">Table layout</label>
            <select class="selector-select" id="tableLayout">
                <option value="single">Single table</option>
                <option value="per_class">One table per class</option>
            </select>
        </div>

        <!-- Due status -->
        <div class="selector-group">
            <label class="selector-label">Due status</label>
            <select class="selector-select" id="dueStatusFilter">
                <option value="all">All</option>
                <option value="overdue">Overdue</option>
                <option value="not_due">Not due</option>
            </select>
        </div>

        <!-- Completion -->
        <div class="selector-group">
            <label class="selector-label">Completion</label>
            <select class="selector-select" id="completionFilter">
                <option value="all">All</option>
                <option value="completed">Completed</option>
                <option value="uncompleted">Uncompleted</option>
            </select>
        </div>

        <!-- Graded -->
        <div class="selector-group">
            <label class="selector-label">Graded</label>
            <select class="selector-select" id="gradedFilter">
                <option value="all">All</option>
                <option value="graded">Graded</option>
                <option value="ungraded">Ungraded</option>
            </select>
        </div>

        <!-- Created -->
        <div class="selector-group">
            <label class="selector-label">Created</label>
            <select class="selector-select" id="createdFilter">
                <option value="all">All</option>
                <option value="last_7_days">Last 7 days</option>
                <option value="last_30_days">Last 30 days</option>
            </select>
        </div>

        <!-- Assignment types -->
        <div class="selector-group wide">
            <span class="selector-label">Assignment type</span>
            <div class="selector-checks grid">
                <label class="selector-check"><input type="checkbox" value="homework" checked> Homework</label>
                <label class="selector-check"><input type="checkbox" value="quiz" checked> Quiz</label>
                <label class="selector-check"><input type="checkbox" value="project" checked> Project</label>
                <label class="selector-check"><input type="checkbox" value="test" checked> Test</label>
                <label class="selector-check"><input type="checkbox" value="exam" checked> Exam</label>
                <label class="selector-check"><input type="checkbox" value="lab_report" checked> Lab report</label>
                <label class="selector-check"><input type="checkbox" value="presentation" checked> Presentation</label>
                <label class="selector-check"><input type="checkbox" value="reading" checked> Reading</label>
                <label class="selector-check"><input type="checkbox" value="other" checked> Other</label>
            </div>
        </div>

        <!-- Sort category radios -->
        <div class="selector-group wide">
            <span class="selector-label">Sort category</span>
            <div class="selector-checks">
                <label class="selector-check">
                    <input type="radio" name="sortCategory" value="name" checked> Name
                </label>
                <label class="selector-check">
                    <input type="radio" name="sortCategory" value="academic"> Academic
                </label>
                <label class="selector-check">
                    <input type="radio" name="sortCategory" value="dates"> Dates
                </label>
                <label class="selector-check">
                    <input type="radio" name="sortCategory" value="time"> Time
                </label>
            </div>
        </div>

        <!-- Sort by -->
        <div class="selector-group">
            <label class="selector-label">Sort by</label>
            <select class="selector-select" id="assignmentSortBy">
                <!-- JS will control visibility -->
                <option value="name_asc" data-cat="name">Name (A ‚Üí Z)</option>
                <option value="name_desc" data-cat="name">Name (Z ‚Üí A)</option>

                <option value="grade_high_low" data-cat="academic">Grade (High ‚Üí Low)</option>
                <option value="grade_low_high" data-cat="academic">Grade (Low ‚Üí High)</option>
                <option value="ponderation_high_low" data-cat="academic">Ponderation (High ‚Üí Low)</option>
                <option value="ponderation_low_high" data-cat="academic">Ponderation (Low ‚Üí High)</option>

                <option value="due_date_soonest" data-cat="dates">Due date (Soonest)</option>
                <option value="due_date_latest" data-cat="dates">Due date (Latest)</option>
                <option value="created_newest" data-cat="dates">Created (Newest)</option>
                <option value="created_oldest" data-cat="dates">Created (Oldest)</option>

                <option value="difficulty_high_low" data-cat="time">Difficulty (High ‚Üí Low)</option>
                <option value="difficulty_low_high" data-cat="time">Difficulty (Low ‚Üí High)</option>
                <option value="estimated_minutes_high_low" data-cat="time">Estimated Time (High ‚Üí Low)</option>
                <option value="estimated_minutes_low_high" data-cat="time">Estimated Time (Low ‚Üí High)</option>
                <option value="study_minutes_high_low" data-cat="time">Time (High ‚Üí Low)</option>
                <option value="study_minutes_low_high" data-cat="time">Time (Low ‚Üí High)</option>
            </select>
        </div>

        <!-- Actions (STACKED) -->
        <div class="selector-actions stacked">
            <button class="btn-tiny primary" id="applyAssignmentFilters">
                Apply filters
            </button>

            <button
                class="btn-tiny"
                data-open-modal="addAssignmentModal"
            >
                + Add Assignment
            </button>
        </div>

    </section>





<!-- ================= Table ================= -->
{% set assignments_by_class = {} %}
{% for a in assignments %}
    {% if a.class_name not in assignments_by_class %}
        {% set _ = assignments_by_class.update({a.class_name: []}) %}
    {% endif %}
    {% set _ = assignments_by_class[a.class_name].append(a) %}
{% endfor %}
<section class="assignments-table-wrapper">



    <!-- ===== SINGLE TABLE MODE ===== -->
    <div class="card assignments-table-card" data-table-mode="single">
        <div class="table-actions">
            <button class="btn-tiny table-edit-inline-btn">‚úè Edit Inline</button>
            <button class="btn-tiny table-edit-btn">‚úè Edit</button>
            <button class="btn-tiny danger table-delete-btn">üóë Delete</button>

            <!-- hidden initially -->
            <button class="btn-tiny hidden table-save-inline-btn">üíæ Save</button>
            <button class="btn-tiny hidden table-cancel-inline-btn">‚úñ Cancel</button>
        </div>


        {% set rows = assignments %}
        {% set show_class_column = true %}
        {% include "partials/assignments_table.html" %}
    </div>


    <!-- ===== PER CLASS MODE ===== -->
    <div class="per-class-wrapper hidden" data-table-mode="per_class">
        {% for class_name, rows in assignments_by_class.items() %}
        <div class="card assignments-table-card per-class-card">
            <h3 class="class-table-title">{{ class_name }}</h3>

            <div class="table-actions">
                <button class="btn-tiny table-edit-inline-btn">‚úè Edit Inline</button>
                <button class="btn-tiny table-edit-btn">‚úè Edit</button>
                <button class="btn-tiny danger table-delete-btn">üóë Delete</button>

                <!-- hidden initially -->
                <button class="btn-tiny hidden table-save-inline-btn">üíæ Save</button>
                <button class="btn-tiny hidden table-cancel-inline-btn">‚úñ Cancel</button>
            </div>
            {% set rows = rows %}
            {% set show_class_column = false %}
            {% include "partials/assignments_table.html" %}
        </div>
        {% endfor %}
    </div>




</section>








<!-- ================= ANALYTICS ================= -->
<section class="assignments-analytics">
    <div class="card chart-card">
        <h3>Completion Breakdown</h3>
        <div class="chart-toggle">
            <button class="btn-tiny active">Simple</button>
            <button class="btn-tiny">Detailed</button>
        </div>
        <canvas id="assignmentCompletionChart"></canvas>
    </div>

    <div class="card chart-card">
        <h3>Grade Distribution</h3>
        <canvas id="assignmentGradeChart"></canvas>
    </div>
</section>


</div>


<!--Edit Assignment Modal-->

<div class="modal-overlay" id="editAssignmentModal">
    <div class="modal card">
        <h2>Edit Assignment</h2>

        <form id="editAssignmentForm">
            <input type="hidden" id="edit-assignment-id">

            <!-- Class -->
            <label for="edit-class" class="input-label">Class</label>
            <select id="edit-class" class="input-field"></select>

            <!-- Title -->
            <label for="edit-title"class="input-label">Title</label>
            <input id="edit-title" type="text" class="input-field" required>

            <!-- Type -->
            <label for="edit-type" class="input-label">Type</label>
            <select id="edit-type" class="input-field"></select>

            <!-- Due -->
            <label for="edit-due-at" class="input-label">Due Date</label>
            <input id="edit-due-at" type="datetime-local" class="input-field">

            <!-- Finished At -->
            <label for="edit-finished-at" class="input-label">Finish Date (Optional)</label>
            <input id="edit-finished-at" type="datetime-local" class="input-field">

            <!-- Graded -->
            <div class="checkbox-row">
                <input type="checkbox" id="edit-is-graded">
                <label for="edit-is-graded">This assignment is graded</label>
            </div>

            <!-- Advanced -->
            <button type="button" class="advanced-toggle">‚ñ∏ Advanced options</button>

            <div class="advanced-options hidden">
                <label for="edit-difficulty" class="input-label">Difficulty
                    <span class="hint-icon" data-hint="How difficult this assignment is expected to be.">?</span>
                </label>
                <input id="edit-difficulty" type="number" class="input-field" min="1" max="10" placeholder="1 (easy) ‚Äì 10 (hard)">

                <label for="edit-estimated-minutes" class="input-label">Estimated Minutes
                    <span class="hint-icon" data-hint="Estimated time to complete this assignment.">?</span>
                </label>
                <input id="edit-estimated-minutes" type="number" class="input-field" min="1" placeholder="e.g. 45">

                <div id="edit-graded-only" class="hidden">
                    <label for="edit-expected-grade" class="input-label">Expected Grade in % (Optional)
                        <span class="hint-icon" data-hint="What grade do you expect to get for this assignment.">?</span>
                    </label>
                    <input id="edit-expected-grade" type="number" class="input-field" min="0" max="100" >

                    <label for="edit-pass-grade" class="input-label">Pass Grade in % (Optional)
                        <span class="hint-icon" data-hint="Minimum grade considered passing.">?</span>
                    </label>
                    <input id="edit-pass-grade" type="number" class="input-field" min="0" max="100">

                    <label for="edit-ponderation" class="input-label">Ponderation, from 1-5 (Optional)
                        <span class="hint-icon" data-hint="What is the relative weight of this assignment compared to others.">?</span>
                    </label>
                    <input id="edit-ponderation" type="number" class="input-field" min="1" max="5">
                </div>
            </div>

            <div class="modal-actions">
                <button type="submit" class="btn full-btn">Confirm</button>
                <button type="button" class="btn ghost-btn" data-close-modal>Cancel</button>
            </div>
        </form>
    </div>
</div>









<!-- ================= ADD ASSIGNMENT MODAL ================= -->
<div class="modal-overlay" id="addAssignmentModal" >
    <div class="modal card">
        <h2>Add Assignment</h2>
        <form method="POST" action="{{ url_for('assignment.add_assignment') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <!-- Mandatory: Class & Assignment Name -->
            <label for="assignment-class" class="input-label">Class</label>
            <select id="assignment-class" name="class_id" class="input-field" required>
                {% for c in classes %}
                <option value="{{ c.class_id }}">{{ c.class_name }}</option>
                {% endfor %}
            </select>

            <label for="assignment-title" class="input-label">Assignment Name</label>
            <input
                id="assignment-title"
                type="text"
                name="assignment_title"
                class="input-field"
                required
            >

            <!-- Mandatory: Assignment Type -->
            <label for="assignment-type" class="input-label">Assignment Type</label>
            <select id="assignment-type" name="assignment_type" class="input-field">
                <option value="homework">Homework</option>
                <option value="project">Project</option>
                <option value="quiz">Quiz</option>
                <option value="writing">Writing</option>
                <option value="test">Test</option>
                <option value="exam">Exam</option>
                <option value="lab_report">Lab Report</option>
                <option value="presentation">Presentation</option>
                <option value="reading">Reading</option>
                <option value="other">Other</option>
            </select>

            <!-- Optional: Due Date -->
            <label for="due_at" class="input-label">Due Date (Optional) <span class="hint">(optional)</span></label>
            <input
                id="due_at"
                type="datetime-local"
                name="due_at"
                class="input-field"
            >

            <!-- ===== GRADED CHECKBOX ===== -->
            <div class="checkbox-row">
                <input
                    type="checkbox"
                    id="is-graded"
                    name="is_graded"
                    class="checkbox-input"
                    data-toggle-checkbox="graded-options-container"
                >
                <label for="is-graded" class="checkbox-label">
                    <span class="checkbox-box"></span>
                    This assignment is graded
                </label>
            </div>

            <!-- Advanced Options Toggle -->
            <button type="button" class="advanced-toggle">‚ñ∏ Advanced options</button>
            <div class="advanced-options hidden"> 
                <!-- Ponderation & Pass Grade (conditional) -->
                <div id="graded-options-container" class="graded-options hidden">
                    <label for="add-expected-grade" class="input-label">Expected Grade</label>
                    <input id="add-expected-grade" type="number" class="input-field" min="0" max="100">
                    <label for="ponderation" class="input-label">
                        Ponderation, from 1‚Äì5 (Optional)
                        <span class="hint-icon" data-hint="What is the relative weight of this assignment compared to others.">?</span>
                    </label>
                    <input
                        id="ponderation"
                        type="number"
                        name="ponderation"
                        class="input-field"
                        min="1"
                        max="5"
                    >

                    <label for="pass_grade" class="input-label">
                        Pass Grade in % (Optional)
                        <span class="hint-icon" data-hint="Minimum grade considered passing.">?</span>
                    </label>
                    <input
                        id="pass_grade"
                        type="number"
                        name="pass_grade"
                        class="input-field"
                        min="0"
                        max="100"
                        step="0.1"
                    >
                </div>

                <!-- Optional fields -->
                <label for="difficulty" class="input-label">Difficulty (Optional)
                    <span class="hint-icon" data-hint="How difficult this assignment is expected to be.">?</span>
                </label>
                <input
                    type="number"
                    name="difficulty"
                    class="input-field"
                    min="1"
                    max="10"
                    placeholder="1 (easy) ‚Äì 10 (hard)"
                > 

                <div class="input-row">
                    <label for="estimated_minutes" class="input-label">Estimated Time (optional)
                        <span class="hint-icon" data-hint="Estimated time to complete this assignment.">?</span>
                    </label>
                    <input
                        id="estimated_minutes"
                        type="number"
                        name="estimated_minutes"
                        class="input-field"
                        min="1"
                        placeholder="e.g. 45"
                    >
                </div>
            </div> 

            <div class="modal-actions">
                <button type="submit" class="btn full-btn">Save</button>
                <button type="button" class="btn ghost-btn" data-close-modal>Cancel</button>
            </div>
        </form>
    </div>
</div>

<!-- ================= INLINE SAVE FINISH DATES MODAL ================= -->
<div class="modal-overlay hidden" id="inlineFinishDatesModal">
  <div class="modal card large-modal">

    <h2>Finish Dates Required</h2>

    <p class="modal-message">
      Please select the finish date for all assignments you have given a grade to.
    </p>

    <!-- ===== SELECT ALL (only shown if >=2 assignments) ===== -->
    <div class="select-all-section hidden" id="finishSelectAll">
      <h4>Select for all</h4>

      <fieldset class="radio-group">
        <label>
          <input type="radio" name="finish_all" value="now">
          Now
        </label>

        <label>
          <input type="radio" name="finish_all" value="pick">
          Pick a date
        </label>

        <input
          type="datetime-local"
          id="finishAllPickedDate"
          class="input-field hidden"
        >

        <label id="finishAllDueOption" class="hidden">
          <input type="radio" name="finish_all" value="due">
          Due date
        </label>
      </fieldset>

      <hr>
    </div>

    <!-- ===== PER-ASSIGNMENT SECTIONS (JS injects) ===== -->
    <div id="finishAssignmentsContainer"></div>

    <div class="modal-actions">
      <button class="btn full-btn" id="confirmInlineFinishDates">
        Save
      </button>
      <button class="btn ghost-btn" data-close-modal>
        Cancel
      </button>
    </div>

  </div>
</div>


<!-- ================= FUTURE FINISH DATE WARNING MODAL ================= -->
<div class="modal-overlay hidden" id="futureFinishDateModal">
    <div class="modal card">
        <h2>Invalid Finish Date</h2>

        <p class="modal-message">
            Please make sure to enter a finish date that has already passed
            (no finish date that is in the future is allowed).
        </p>

        <div class="modal-actions">
            <button
                type="button"
                class="btn full-btn"
                data-close-modal
            >
                Ok
            </button>
        </div>
    </div>
</div>


<!-- Uncomplete confirmation modal-->
<div class="modal-overlay hidden" id="uncompleteConfirmModal">
    <div class="modal card">
        <h2>Mark as Uncompleted</h2>

        <p class="modal-message" id="uncompleteMessage"></p>

        <div class="modal-actions">
        <button class="btn full-btn" id="confirmUncomplete">Confirm</button>
        <button class="btn ghost-btn" data-close-modal>Cancel</button>
        </div>
    </div>
</div>



<!-- Complete assignment modal -->
 <div class="modal-overlay hidden" id="completeAssignmentModal">
  <div class="modal card">
    <h2>Mark as Completed</h2>

    <p class="modal-message" id="completeMessage"></p>

    <fieldset class="radio-group">
      <label>
        <input type="radio" name="completion_time" value="now" checked>
        Now
      </label>

      <label>
        <input type="radio" name="completion_time" value="pick">
        Pick a date
      </label>

      <input
        type="datetime-local"
        id="pickedCompletionDate"
        class="input-field hidden"
      >

      <label id="dueDateOption" class="hidden">
        <input type="radio" name="completion_time" value="due">
        Due date
      </label>
    </fieldset>

    <div class="modal-actions">
      <button class="btn full-btn" id="confirmComplete">Confirm</button>
      <button class="btn ghost-btn" data-close-modal>Cancel</button>
    </div>
  </div>
</div>


<!-- ================= INVALID GRADE MODAL ================= -->
<div class="modal-overlay hidden" id="invalidGradeModal">
    <div class="modal card">
        <h2>Invalid Grades</h2>

        <p class="modal-message">
            Please ensure all the grades you input are between 0‚Äì100.
        </p>

        <div class="modal-actions">
            <button
                type="button"
                class="btn full-btn"
                data-close-modal
            >
                Ok
            </button>
        </div>
    </div>
</div>


<!-- ================= DELETE ASSIGNMENT MODAL ================= -->
<div class="modal-overlay hidden" id="deleteAssignmentModal">
  <div class="modal card">

    <h2>Delete Assignment</h2>

    <!-- STEP TEXT -->
    <p id="deleteAssignmentStepText" class="modal-message"></p>

    <!-- STEP 2: IMPACT -->
    <div id="deleteAssignmentImpactBox" class="hidden">
      <p>This action will permanently delete:</p>
      <ul>
        <li>
          <strong id="deleteAssignmentSessionCount">‚Äî</strong> study sessions
        </li>
        <li>
          <strong id="deleteAssignmentStudyMinutes">‚Äî</strong> total study minutes
        </li>
      </ul>
    </div>

    <!-- STEP 3: CONFIRM INPUT -->
    <div id="deleteAssignmentInputBox" class="hidden">
      <label class="input-label">
        Type <strong id="deleteAssignmentConfirmName"></strong> to confirm
      </label>
      <input
        type="text"
        id="deleteAssignmentConfirmInput"
        class="input-field"
        placeholder="Assignment name"
      >
    </div>

    <!-- ACTIONS -->
    <div class="modal-actions">
      <button
        class="btn ghost-btn hidden"
        id="deleteAssignmentBackBtn"
      >
        Back
      </button>

      <button
        class="btn ghost-btn"
        data-close-modal
      >
        Cancel
      </button>

      <button
        class="btn full-btn"
        id="deleteAssignmentNextBtn"
      >
        Next
      </button>

      <button
        class="btn full-btn hidden"
        id="deleteAssignmentConfirmBtn"
        disabled
      >
        Delete
      </button>
    </div>

  </div>
</div>

<!-- ================= UNSAVED CHANGES MODAL ================= -->
<div class="modal-overlay hidden" id="unsavedChangesModal">
  <div class="modal card">
    <h2>Unsaved Changes</h2>
    <p>You are about to leave this page with unsaved changes.</p>

    <div class="modal-actions">
      <button id="saveAllInline" class="btn full-btn" style="background:#22c55e">
        Save changes
      </button>

      <button id="leaveWithoutSaving" class="btn full-btn" style="background:#ef4444">
        Leave without saving
      </button>

      <button id="stayOnPage" class="btn full-btn" style="background:#3b82f6">
        Stay on the page
      </button>
    </div>
  </div>
</div>


{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/form.js') }}"></script>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script src="{{ url_for('static', filename='js/assignments.js') }}"></script>
<script src="{{ url_for('static', filename='js/constants.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/selector/assignments_selector.js') }}"></script>

{% endblock %}
